<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>â™  Poker Scoreboard</title>
<style>
/* â”€â”€ Reset & Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #0d0d1a;
  --bg2: #111827;
  --card: rgba(22,33,62,0.85);
  --border: rgba(255,255,255,0.07);
  --gold: #f5a623;
  --gold2: #ffd700;
  --red: #e94560;
  --green: #27ae60;
  --blue: #2980b9;
  --purple: #7c3aed;
  --text: #e8eaf0;
  --muted: #6b7280;
  --radius: 16px;
  --shadow: 0 8px 32px rgba(0,0,0,0.45);
  --glow-blue:  0 0 20px rgba(41,128,185,0.5);
  --glow-gold:  0 0 20px rgba(245,166,35,0.5);
  --glow-red:   0 0 20px rgba(233,69,96,0.5);
  --glow-green: 0 0 20px rgba(39,174,96,0.5);
}
html { scroll-behavior: smooth; }
body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* â”€â”€ Ambient background glow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
body::before {
  content: '';
  position: fixed; inset: 0;
  background:
    radial-gradient(ellipse at 20% 20%, rgba(124,58,237,0.08) 0%, transparent 60%),
    radial-gradient(ellipse at 80% 80%, rgba(233,69,96,0.06) 0%, transparent 60%),
    radial-gradient(ellipse at 50% 50%, rgba(41,128,185,0.05) 0%, transparent 70%);
  pointer-events: none; z-index: 0;
}

/* â”€â”€ Scrollbar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 3px; }

/* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
header {
  position: relative; z-index: 10;
  background: linear-gradient(160deg, #0f0f23 0%, #1a1040 50%, #0f1929 100%);
  border-bottom: 1px solid rgba(245,166,35,0.2);
  padding: 20px 16px 16px;
  text-align: center;
  box-shadow: 0 4px 30px rgba(0,0,0,0.5);
}
header::after {
  content: '';
  position: absolute; bottom: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
}
.header-title {
  font-size: clamp(1.6rem, 5vw, 2.2rem);
  font-weight: 800;
  letter-spacing: 3px;
  background: linear-gradient(135deg, #ffd700, #f5a623, #ff6b6b);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  margin-bottom: 12px;
}
.header-suit {
  display: inline-block;
  animation: suitRock 6s ease-in-out infinite;
  margin: 0 6px;
  -webkit-text-fill-color: initial;
  font-size: 1rem;
}
@keyframes suitRock {
  0%,100%{transform:rotate(-5deg)} 50%{transform:rotate(5deg)}
}
.pot-container {
  display: inline-flex; align-items: center; gap: 10px;
  background: rgba(245,166,35,0.08);
  border: 1px solid rgba(245,166,35,0.25);
  border-radius: 50px;
  padding: 8px 22px;
  margin-bottom: 10px;
  backdrop-filter: blur(8px);
}
.pot-label { font-size: 0.78rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; }
.pot-amount {
  font-size: 1.5rem; font-weight: 800; color: var(--gold);
  min-width: 60px; text-align: center;
  transition: color 0.3s;
}
.pot-amount.bump { animation: potBump 0.45s cubic-bezier(0.34,1.56,0.64,1); }
@keyframes potBump {
  0%{transform:scale(1)}
  45%{transform:scale(1.4);color:#ffd700}
  100%{transform:scale(1)}
}
.header-meta {
  display: flex; justify-content: center; gap: 22px;
  font-size: 0.8rem; color: var(--muted);
}
.header-meta span { display: flex; align-items: center; gap: 5px; }
.header-meta b { color: var(--text); font-weight: 700; }

/* â”€â”€ Hand Rankings Modal / Bottom Sheet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.modal-overlay {
  position: fixed; inset: 0; z-index: 300;
  background: rgba(0,0,0,0.72);
  backdrop-filter: blur(6px);
  display: flex; align-items: flex-end; justify-content: center;
  opacity: 0; pointer-events: none;
  transition: opacity 0.3s;
}
.modal-overlay.open { opacity: 1; pointer-events: all; }
.modal-sheet {
  background: linear-gradient(160deg, #1a1040 0%, #0f1929 100%);
  border: 1px solid rgba(245,166,35,0.2);
  border-radius: 24px 24px 0 0;
  width: 100%; max-width: 640px;
  max-height: 85vh; overflow-y: auto;
  padding-bottom: 24px;
  transform: translateY(100%);
  transition: transform 0.42s cubic-bezier(0.34,1.56,0.64,1);
  box-shadow: 0 -8px 40px rgba(0,0,0,0.6);
}
.modal-overlay.open .modal-sheet { transform: translateY(0); }
.modal-handle {
  width: 44px; height: 5px;
  background: rgba(255,255,255,0.15); border-radius: 3px;
  margin: 14px auto 0;
}
.modal-header {
  padding: 14px 20px 12px;
  display: flex; justify-content: space-between; align-items: center;
  border-bottom: 1px solid var(--border);
}
.modal-header h2 { font-size: 1.1rem; color: var(--gold); font-weight: 700; }
.modal-close {
  background: rgba(255,255,255,0.08); border: none; color: var(--text);
  width: 32px; height: 32px; border-radius: 50%; cursor: pointer;
  font-size: 1rem; display: flex; align-items: center; justify-content: center;
  transition: background 0.2s;
}
.modal-close:hover { background: rgba(255,255,255,0.18); }
/* â”€â”€ Hand Rankings List â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hand-list { padding: 14px 14px 10px; display: flex; flex-direction: column; gap: 10px; }
.hand-item {
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border);
  border-radius: 16px; padding: 14px 14px 12px;
  transition: background 0.2s, transform 0.2s, border-color 0.2s;
  opacity: 0;
}
.modal-overlay.open .hand-item { animation: slideInHand 0.38s ease both; }
@keyframes slideInHand { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:none} }
.hand-item:hover {
  background: rgba(255,255,255,0.07);
  transform: translateY(-1px);
  border-color: rgba(245,166,35,0.2);
}

/* â”€â”€ Hand meta row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hand-meta {
  display: flex; align-items: flex-start; gap: 10px;
  margin-bottom: 10px;
}
.hand-rank-num {
  min-width: 30px; height: 30px; border-radius: 9px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.8rem; font-weight: 800;
  background: rgba(245,166,35,0.12); color: var(--gold);
  flex-shrink: 0; margin-top: 1px;
}
.hand-rank-num.top { background: linear-gradient(135deg,#f5a623,#ffd700); color: #000; box-shadow: 0 2px 8px rgba(245,166,35,0.4); }
.hand-text { flex: 1; }
.hand-name { font-weight: 800; font-size: 0.95rem; color: var(--text); line-height: 1.2; }
.hand-desc { font-size: 0.75rem; color: var(--muted); margin-top: 3px; line-height: 1.35; }
.hand-odds { font-size: 0.68rem; color: #a78bfa; font-weight: 700; margin-top: 3px; display: inline-block; background: rgba(167,139,250,0.1); padding: 1px 7px; border-radius: 20px; }

/* â”€â”€ Card row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card-row {
  display: flex; gap: 7px; flex-wrap: nowrap; overflow-x: auto;
  padding: 4px 2px 6px;
  scrollbar-width: none;
}
.card-row::-webkit-scrollbar { display: none; }

/* â”€â”€ Individual playing card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.pc {
  flex-shrink: 0;
  width: 50px; height: 68px;
  background: linear-gradient(145deg, #ffffff 0%, #f4f6fb 100%);
  border-radius: 8px;
  border: 1px solid rgba(200,210,230,0.8);
  display: flex; flex-direction: column;
  align-items: flex-start; justify-content: space-between;
  padding: 4px 5px 4px 5px;
  font-family: Georgia, 'Times New Roman', serif;
  box-shadow:
    0 4px 12px rgba(0,0,0,0.45),
    0 1px 3px rgba(0,0,0,0.2),
    inset 0 1px 0 rgba(255,255,255,0.9),
    inset 0 0 0 1px rgba(255,255,255,0.4);
  position: relative;
  transition: transform 0.18s cubic-bezier(0.34,1.56,0.64,1), box-shadow 0.18s;
  cursor: default;
}
.pc:hover {
  transform: translateY(-7px) scale(1.08) rotate(-1deg);
  box-shadow: 0 12px 28px rgba(0,0,0,0.55), 0 4px 8px rgba(0,0,0,0.3);
}
/* Dim/kicker cards */
.pc.dim {
  background: linear-gradient(145deg, #dde4f0 0%, #c8d3e8 100%);
  border-color: rgba(160,180,220,0.6);
  opacity: 0.6;
}
/* Top-left corner */
.pc .corner-top {
  display: flex; flex-direction: column; align-items: center;
  line-height: 1; gap: 0;
}
/* Bottom-right corner (flipped) */
.pc .corner-bot {
  display: flex; flex-direction: column; align-items: center;
  line-height: 1; gap: 0;
  transform: rotate(180deg);
  align-self: flex-end;
}
.pc .c-rank {
  font-size: 0.82rem; font-weight: 900; line-height: 1;
  letter-spacing: -0.5px; display: block;
}
.pc .c-suit {
  font-size: 0.55rem; line-height: 1; display: block;
}
/* Center suit */
.pc .suit-center {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.45rem; line-height: 1;
  pointer-events: none;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.12));
}
/* Colour variants */
.pc.red .c-rank, .pc.red .c-suit, .pc.red .suit-center { color: #c8000a; }
.pc.black .c-rank, .pc.black .c-suit, .pc.black .suit-center { color: #0d0d0d; }
.pc.dim .c-rank, .pc.dim .c-suit, .pc.dim .suit-center { color: #7085aa; }

/* â”€â”€ Main Container â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.container {
  max-width: 900px; margin: 0 auto;
  padding: 20px 14px 110px;
  position: relative; z-index: 1;
}

/* â”€â”€ Section Labels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.section-label {
  font-size: 0.68rem; text-transform: uppercase; letter-spacing: 2px;
  color: var(--muted); margin-bottom: 10px;
  display: flex; align-items: center; gap: 8px;
}
.section-label::after { content:''; flex:1; height:1px; background: var(--border); }

/* â”€â”€ Glassmorphism Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.glass {
  background: var(--card);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

/* â”€â”€ Add Player Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.add-player-section {
  padding: 18px; margin-bottom: 18px;
  display: flex; gap: 10px; flex-wrap: wrap; align-items: center;
}
.add-player-section input {
  flex: 1; min-width: 130px;
  padding: 13px 16px;
  border-radius: 12px;
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.05);
  color: var(--text); font-size: 0.95rem; outline: none;
  transition: border-color 0.2s, box-shadow 0.2s, background 0.2s;
}
.add-player-section input:focus {
  border-color: var(--gold);
  background: rgba(245,166,35,0.06);
  box-shadow: 0 0 0 3px rgba(245,166,35,0.15);
}
.add-player-section input::placeholder { color: var(--muted); }
.add-player-section input[type=number] { max-width: 120px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BUTTONS â€” Premium Casino Style
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn {
  position: relative; overflow: hidden;
  min-height: 44px; padding: 11px 18px;
  border: none; border-radius: 13px;
  cursor: pointer; font-size: 0.9rem; font-weight: 700;
  letter-spacing: 0.3px; color: #fff;
  transition: transform 0.15s, box-shadow 0.2s, filter 0.2s;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  display: inline-flex; align-items: center; justify-content: center; gap: 6px;
}
.btn:active { transform: scale(0.95) !important; filter: brightness(0.88) !important; }
.btn:disabled {
  opacity: 0.3 !important; cursor: not-allowed !important;
  transform: none !important; filter: none !important; box-shadow: none !important;
}

/* Ripple layer */
.ripple-ring {
  position: absolute; border-radius: 50%;
  background: rgba(255,255,255,0.28);
  transform: scale(0); animation: rippleAnim 0.55s linear;
  pointer-events: none;
}
@keyframes rippleAnim { to { transform: scale(4); opacity: 0; } }

/* â”€â”€ Button Themes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.btn-add {
  background: linear-gradient(135deg, #059669, #10b981);
  box-shadow: 0 4px 16px rgba(16,185,129,0.3);
}
.btn-add:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 28px rgba(16,185,129,0.55);
}

.btn-start {
  background: linear-gradient(135deg, #15803d, #22c55e);
  box-shadow: 0 4px 16px rgba(34,197,94,0.3);
  font-size: 1rem; padding: 13px 26px; min-height: 50px;
}
.btn-start:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(34,197,94,0.55);
}

.btn-reset {
  background: linear-gradient(135deg, #374151, #4b5563);
  box-shadow: 0 4px 12px rgba(0,0,0,0.35);
}
.btn-reset:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 22px rgba(75,85,99,0.55);
}

.btn-call {
  background: linear-gradient(135deg, #1d4ed8, #3b82f6);
  box-shadow: 0 4px 14px rgba(59,130,246,0.3);
  flex: 1;
}
.btn-call:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: var(--glow-blue);
}

.btn-raise {
  background: linear-gradient(135deg, #b45309, #f59e0b);
  box-shadow: 0 4px 14px rgba(245,158,11,0.3);
}
.btn-raise:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: var(--glow-gold);
}

.btn-fold {
  background: linear-gradient(135deg, #9f1239, #e11d48);
  box-shadow: 0 4px 14px rgba(225,29,72,0.3);
  flex: 1;
}
.btn-fold:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: var(--glow-red);
}

.btn-award {
  background: linear-gradient(135deg, #78350f, #f59e0b);
  box-shadow: 0 4px 16px rgba(245,158,11,0.35);
  min-height: 50px; padding: 13px 26px; font-size: 0.95rem;
}
.btn-award:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(245,158,11,0.6);
}

/* â”€â”€ Controls Row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.controls { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }

/* â”€â”€ Players Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.players-grid {
  display: grid; grid-template-columns: 1fr;
  gap: 14px; margin-bottom: 22px;
}
@media (min-width: 560px) { .players-grid { grid-template-columns: repeat(2,1fr); } }
@media (min-width: 800px) { .players-grid { grid-template-columns: repeat(3,1fr); } }

/* â”€â”€ Player Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.player-card {
  background: var(--card);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--border);
  border-radius: 18px; padding: 18px;
  position: relative;
  transition: border-color 0.3s, box-shadow 0.3s, transform 0.2s, opacity 0.3s;
  animation: cardFadeIn 0.4s ease both;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
@keyframes cardFadeIn {
  from { opacity:0; transform:translateY(14px) scale(0.97); }
  to   { opacity:1; transform:none; }
}
.player-card:hover:not(.folded) { transform: translateY(-2px); box-shadow: 0 10px 32px rgba(0,0,0,0.45); }
.player-card.folded { opacity: 0.42; filter: grayscale(0.5); border-color: rgba(255,255,255,0.03); }
.player-card.highest-bettor {
  border-color: var(--gold);
  box-shadow: 0 0 0 1px var(--gold), var(--glow-gold), 0 4px 20px rgba(0,0,0,0.3);
}
.player-card.action-pulse { animation: actionPulse 0.5s ease; }
@keyframes actionPulse {
  0%  { box-shadow: 0 0 0 0 rgba(245,166,35,0.8); }
  50% { box-shadow: 0 0 0 14px rgba(245,166,35,0); }
  100%{ box-shadow: 0 0 0 0 rgba(245,166,35,0); }
}
.player-card.winner-glow { animation: winnerPulse 1.4s ease infinite; border-color: var(--gold2); }
@keyframes winnerPulse {
  0%,100% { box-shadow: 0 0 0 2px var(--gold2), 0 0 22px rgba(255,215,0,0.3); }
  50%     { box-shadow: 0 0 0 5px var(--gold2), 0 0 44px rgba(255,215,0,0.65); }
}

.remove-btn {
  position: absolute; top: 12px; right: 12px;
  background: rgba(233,69,96,0.08); border: 1px solid rgba(233,69,96,0.2);
  color: var(--red); cursor: pointer;
  width: 28px; height: 28px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.85rem; transition: background 0.2s, transform 0.15s;
}
.remove-btn:hover { background: rgba(233,69,96,0.22); transform: scale(1.12); }

.player-name {
  font-size: 1.05rem; font-weight: 800; color: #fff;
  margin-bottom: 4px; padding-right: 36px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.player-status {
  display: inline-block;
  font-size: 0.65rem; padding: 3px 10px;
  border-radius: 20px; font-weight: 700;
  letter-spacing: 0.8px; text-transform: uppercase; margin-bottom: 14px;
}
.status-active { background: rgba(16,185,129,0.12); color: #10b981; border: 1px solid rgba(16,185,129,0.22); }
.status-folded { background: rgba(225,29,72,0.12); color: #e11d48; border: 1px solid rgba(225,29,72,0.22); }

.player-stats {
  display: grid; grid-template-columns: repeat(3,1fr);
  gap: 8px; margin-bottom: 16px;
}
.stat {
  background: rgba(255,255,255,0.04); border: 1px solid var(--border);
  border-radius: 10px; padding: 8px 5px; text-align: center;
}
.stat-label { color: var(--muted); font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 3px; }
.stat-value { font-weight: 800; font-size: 1rem; display: block; }
.chips-value { color: #10b981; }
.bet-value   { color: var(--gold); }
.score-value { color: #a78bfa; }

.player-actions { display: flex; flex-direction: column; gap: 8px; }
.actions-row1 { display: flex; gap: 8px; }
.actions-row2 { display: flex; gap: 8px; align-items: center; }
.raise-input {
  flex: 1; min-width: 0; padding: 11px 10px;
  border-radius: 11px; border: 1px solid var(--border);
  background: rgba(255,255,255,0.05);
  color: var(--text); font-size: 0.85rem; outline: none;
  transition: border-color 0.2s, box-shadow 0.2s; min-height: 44px;
}
.raise-input:focus {
  border-color: #f59e0b;
  box-shadow: 0 0 0 3px rgba(245,158,11,0.15);
  background: rgba(245,158,11,0.04);
}
.raise-input::placeholder { color: var(--muted); }
.raise-input:disabled { opacity: 0.28; }

/* â”€â”€ End Round Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.end-round-section { padding: 18px; margin-bottom: 20px; }
.end-round-section h3 {
  font-size: 0.95rem; color: var(--gold); font-weight: 700;
  margin-bottom: 14px; display: flex; align-items: center; gap: 8px;
}
.end-round-row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
.winner-select {
  flex: 1; min-width: 160px;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid rgba(245,166,35,0.3);
  background: rgba(245,166,35,0.06);
  color: var(--text); font-size: 0.9rem; outline: none; cursor: pointer;
  transition: border-color 0.2s; min-height: 50px;
}
.winner-select:focus { border-color: var(--gold); }

/* â”€â”€ Leaderboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.leaderboard { padding: 18px; margin-bottom: 20px; }
.leaderboard-header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 16px;
}
.leaderboard-title { font-size: 1rem; color: var(--gold); font-weight: 700; display: flex; align-items: center; gap: 8px; }
.collapse-btn {
  background: rgba(255,255,255,0.06); border: 1px solid var(--border);
  color: var(--muted); padding: 5px 13px; border-radius: 8px;
  font-size: 0.78rem; cursor: pointer; transition: background 0.2s, color 0.2s;
  min-height: 32px;
}
.collapse-btn:hover { background: rgba(255,255,255,0.12); color: var(--text); }
.leaderboard-body { overflow: hidden; transition: max-height 0.42s ease, opacity 0.3s; }
.leaderboard-body.collapsed { max-height: 0 !important; opacity: 0; }

table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
thead th {
  color: var(--muted); font-weight: 600; text-transform: uppercase;
  font-size: 0.65rem; letter-spacing: 1px;
  padding: 8px 10px; border-bottom: 1px solid var(--border); text-align: left;
}
tbody tr {
  transition: background 0.2s;
  animation: rowSlideIn 0.35s ease both;
}
tbody tr:nth-child(1){animation-delay:0.00s}
tbody tr:nth-child(2){animation-delay:0.05s}
tbody tr:nth-child(3){animation-delay:0.10s}
tbody tr:nth-child(4){animation-delay:0.15s}
tbody tr:nth-child(5){animation-delay:0.20s}
tbody tr:nth-child(6){animation-delay:0.25s}
@keyframes rowSlideIn { from{opacity:0;transform:translateX(-10px)} to{opacity:1;transform:none} }
tbody tr:hover td { background: rgba(255,255,255,0.03); }
tbody td { padding: 11px 10px; border-bottom: 1px solid rgba(255,255,255,0.03); }
tbody tr:last-child td { border-bottom: none; }

.rank-badge {
  display: inline-flex; align-items: center; justify-content: center;
  width: 26px; height: 26px; border-radius: 8px;
  font-weight: 800; font-size: 0.75rem;
}
.rank-1 { background: linear-gradient(135deg,#f5a623,#ffd700); color:#000; box-shadow:0 2px 8px rgba(255,215,0,0.4); }
.rank-2 { background: linear-gradient(135deg,#9ca3af,#d1d5db); color:#000; }
.rank-3 { background: linear-gradient(135deg,#b45309,#ca8a04); color:#fff; }
.rank-other { background: rgba(255,255,255,0.06); color:var(--muted); }

.lb-name   { font-weight: 600; }
.lb-chips  { color: #10b981; font-weight: 700; }
.lb-score  { color: #a78bfa; font-weight: 700; }

/* â”€â”€ Empty State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.empty-state { text-align: center; color: var(--muted); padding: 40px 20px; }
.empty-icon  { font-size: 3rem; margin-bottom: 10px; display: block; opacity: 0.45; }

/* â”€â”€ Toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toast-container {
  position: fixed; top: 16px; right: 16px; z-index: 500;
  display: flex; flex-direction: column; gap: 8px;
}
.toast {
  background: rgba(18,24,42,0.96);
  backdrop-filter: blur(12px);
  border: 1px solid var(--border);
  border-radius: 12px; padding: 12px 18px;
  font-size: 0.87rem; color: var(--text);
  box-shadow: 0 8px 32px rgba(0,0,0,0.45);
  transform: translateX(120%);
  transition: transform 0.38s cubic-bezier(0.34,1.56,0.64,1);
  min-width: 200px; max-width: 280px;
  display: flex; align-items: center; gap: 10px;
}
.toast.show { transform: translateX(0); }
.toast.toast-win   { border-color: var(--gold); }
.toast.toast-info  { border-color: rgba(59,130,246,0.5); }
.toast.toast-error { border-color: rgba(233,69,96,0.5); }
.toast-icon { font-size: 1.15rem; }

/* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (max-width: 480px) {
  header { padding: 16px 12px 14px; }
  .container { padding: 14px 10px 120px; }
  .add-player-section { flex-direction: column; }
  .add-player-section input { min-width: 100%; max-width: 100%; }
  .fab-group { bottom: 16px; right: 10px; }
}

/* â”€â”€ FAB Group (floating action buttons) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.fab-group {
  position: fixed; bottom: 24px; right: 16px; z-index: 200;
  display: flex; flex-direction: column; gap: 10px; align-items: flex-end;
}
.fab-btn {
  border: none; border-radius: 50px;
  padding: 13px 20px; font-size: 0.88rem; font-weight: 700;
  cursor: pointer; letter-spacing: 0.4px; color: #fff;
  display: flex; align-items: center; gap: 7px;
  transition: transform 0.2s, box-shadow 0.2s;
  -webkit-tap-highlight-color: transparent;
  white-space: nowrap;
}
.fab-btn:active { transform: scale(0.94) !important; }
.fab-hand {
  background: linear-gradient(135deg, #7c3aed, #4f46e5);
  box-shadow: 0 6px 24px rgba(124,58,237,0.45);
}
.fab-hand:hover { transform: translateY(-3px); box-shadow: 0 10px 32px rgba(124,58,237,0.65); }
.fab-rules {
  background: linear-gradient(135deg, #0f766e, #0d9488);
  box-shadow: 0 6px 24px rgba(13,148,136,0.45);
}
.fab-rules:hover { transform: translateY(-3px); box-shadow: 0 10px 32px rgba(13,148,136,0.65); }

/* â”€â”€ Rules Modal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#rules-modal .modal-sheet { max-width: 640px; }
.rules-body { padding: 14px 16px 24px; }
.rules-intro {
  font-size: 0.85rem; color: var(--muted); line-height: 1.6;
  padding: 10px 12px; background: rgba(255,255,255,0.04);
  border-radius: 10px; border-left: 3px solid var(--gold); margin-bottom: 14px;
}
.rules-section { margin-bottom: 16px; }
.rules-section-title {
  font-size: 0.8rem; font-weight: 800; text-transform: uppercase;
  letter-spacing: 1px; color: var(--gold); margin-bottom: 8px;
  display: flex; align-items: center; gap: 7px;
}
.rules-section-title::after { content:''; flex:1; height:1px; background: rgba(245,166,35,0.15); }
.rules-item {
  display: flex; gap: 10px; align-items: flex-start;
  padding: 9px 12px; border-radius: 10px;
  background: rgba(255,255,255,0.03); border: 1px solid var(--border);
  margin-bottom: 6px;
  animation: slideInHand 0.35s ease both;
}
.rules-icon {
  font-size: 1.1rem; min-width: 24px; text-align: center; margin-top: 1px;
}
.rules-text { flex: 1; }
.rules-text strong { color: var(--text); font-size: 0.88rem; display: block; margin-bottom: 2px; }
.rules-text span { color: var(--muted); font-size: 0.78rem; line-height: 1.45; }
.rules-tip {
  background: rgba(124,58,237,0.08); border: 1px solid rgba(124,58,237,0.2);
  border-radius: 10px; padding: 10px 14px;
  font-size: 0.78rem; color: #c4b5fd; line-height: 1.55;
  margin-top: 6px;
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header>
  <h1 class="header-title">
    <span class="header-suit">â™ </span>
    Poker Scoreboard
    <span class="header-suit">â™¦</span>
  </h1>
  <div class="pot-container">
    <span class="pot-label">ğŸª™ Pot</span>
    <span class="pot-amount" id="pot-amount">0</span>
    <span class="pot-label">chips</span>
  </div>
  <div class="header-meta">
    <span>Round <b id="round-number">0</b></span>
    <span>High Bet <b id="highest-bet">0</b></span>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FAB BUTTON GROUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="fab-group">
  <button class="fab-btn fab-rules" onclick="toggleRules()" aria-label="Open Game Rules">
    ğŸ“– Game Rules
  </button>
  <button class="fab-btn fab-hand" onclick="toggleHandRankings()" aria-label="Open Poker Hand Rankings">
    ğŸƒ Hand Rankings
  </button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HAND RANKINGS MODAL / BOTTOM SHEET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="hand-modal" onclick="closeModalIfBg(event,'hand-modal')" role="dialog" aria-modal="true" aria-label="Poker Hand Rankings">
  <div class="modal-sheet">
    <div class="modal-handle"></div>
    <div class="modal-header">
      <h2>ğŸƒ Poker Hand Rankings</h2>
      <button class="modal-close" onclick="toggleHandRankings()" aria-label="Close">âœ•</button>
    </div>
    <div class="hand-list" id="hand-list"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GAME RULES MODAL / BOTTOM SHEET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="rules-modal" onclick="closeModalIfBg(event,'rules-modal')" role="dialog" aria-modal="true" aria-label="Game Rules">
  <div class="modal-sheet">
    <div class="modal-handle"></div>
    <div class="modal-header">
      <h2>ğŸ“– Rules of the Game</h2>
      <button class="modal-close" onclick="toggleRules()" aria-label="Close">âœ•</button>
    </div>
    <div class="rules-body">

      <p class="rules-intro">
        This scoreboard tracks a friendly <strong style="color:var(--text)">Texas Hold'emâ€“style</strong> poker session. 
        Players manage chips, place bets and the admin awards the pot each round. No cards are dealt â€” this is purely a chip & score manager.
      </p>

      <!-- Setup -->
      <div class="rules-section">
        <div class="rules-section-title">ğŸ® Setup</div>
        <div class="rules-item" style="animation-delay:0.05s">
          <div class="rules-icon">ğŸ‘¥</div>
          <div class="rules-text">
            <strong>Add Players (2â€“6)</strong>
            <span>Enter each player's name and their starting chip count (default 1,000). Each player gets a card on screen showing their chip stack, current bet and total score.</span>
          </div>
        </div>
        <div class="rules-item" style="animation-delay:0.10s">
          <div class="rules-icon">â–¶ï¸</div>
          <div class="rules-text">
            <strong>Start Round</strong>
            <span>Click <em>Start Round</em> to begin a new hand. All bets reset to zero, folded players become active again and the round counter increments.</span>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="rules-section">
        <div class="rules-section-title">âš¡ Player Actions</div>
        <div class="rules-item" style="animation-delay:0.15s">
          <div class="rules-icon">ğŸ“</div>
          <div class="rules-text">
            <strong>Call</strong>
            <span>Match the current highest bet at the table. The difference between the highest bet and the player's current bet is deducted from their chips and added to the pot.</span>
          </div>
        </div>
        <div class="rules-item" style="animation-delay:0.20s">
          <div class="rules-icon">ğŸ“ˆ</div>
          <div class="rules-text">
            <strong>Raise</strong>
            <span>Enter an amount in the raise field and hit Raise. The new bet becomes: <em>Highest Bet + Raise Amount</em>. The player's chips are reduced by the extra amount and it's added to the pot. This becomes the new highest bet all others must match.</span>
          </div>
        </div>
        <div class="rules-item" style="animation-delay:0.25s">
          <div class="rules-icon">ğŸ³ï¸</div>
          <div class="rules-text">
            <strong>Fold</strong>
            <span>The player surrenders their hand and sits out for the rest of the round. Their cards are greyed out. Any chips already in the pot are lost. They return as active next round.</span>
          </div>
        </div>
        <div class="rules-item" style="animation-delay:0.30s">
          <div class="rules-icon">ğŸ’¥</div>
          <div class="rules-text">
            <strong>All-In</strong>
            <span>If a player doesn't have enough chips to call, they automatically go all-in â€” their remaining chips enter the pot and their bet is updated accordingly.</span>
          </div>
        </div>
      </div>

      <!-- Pot & Winning -->
      <div class="rules-section">
        <div class="rules-section-title">ğŸª™ Pot & Winning</div>
        <div class="rules-item" style="animation-delay:0.35s">
          <div class="rules-icon">ğŸ†</div>
          <div class="rules-text">
            <strong>End Round â€” Award the Pot</strong>
            <span>Once all betting is done (in real life the players show cards), the admin selects the winner from the dropdown and clicks <em>Award Pot</em>. The entire pot is transferred to the winner's chip stack and added to their cumulative Score.</span>
          </div>
        </div>
        <div class="rules-item" style="animation-delay:0.40s">
          <div class="rules-icon">ğŸ“Š</div>
          <div class="rules-text">
            <strong>Score vs Chips</strong>
            <span><em>Chips</em> is the player's current wallet â€” it changes every hand. <em>Score</em> is a cumulative lifetime total of all pots won â€” it never goes down. Rankings are sorted by Score first, then Chips as a tiebreaker.</span>
          </div>
        </div>
      </div>

      <!-- Tips -->
      <div class="rules-section">
        <div class="rules-section-title">ğŸ’¡ Tips</div>
        <div class="rules-tip">
          â­ The player with the <strong>highest current bet</strong> is highlighted with a gold glow on their card.<br><br>
          ğŸ”„ Use <strong>Reset Game</strong> to wipe all data and start a brand new session from scratch.<br><br>
          ğŸ“± The scoreboard is fully <strong>mobile-friendly</strong> â€” pass your phone around the table so each player can see their stats in real time!
        </div>
      </div>

    </div><!-- /rules-body -->
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TOAST CONTAINER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="toast-container" id="toast-container" aria-live="polite"></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MAIN CONTENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="container">

  <!-- Add Player -->
  <p class="section-label">Setup â€” Add Players (max 6)</p>
  <div class="add-player-section glass">
    <input type="text"   id="player-name-input"  placeholder="Player nameâ€¦"  maxlength="20" autocomplete="off">
    <input type="number" id="player-chips-input" placeholder="Chips"  value="1000" min="100" max="99999">
    <button class="btn btn-add" onclick="addPlayer()">ï¼‹ Add Player</button>
  </div>

  <!-- Game Controls -->
  <div class="controls">
    <button class="btn btn-start" onclick="startRound()">â–¶ Start Round</button>
    <button class="btn btn-reset" onclick="resetGame()">â†º Reset Game</button>
  </div>

  <!-- Player Cards -->
  <p class="section-label">Players</p>
  <div id="players-grid" class="players-grid">
    <div class="empty-state" style="grid-column:1/-1">
      <span class="empty-icon">â™ â™¥â™¦â™£</span>
      Add players above to begin
    </div>
  </div>

  <!-- End Round / Award Winner -->
  <div class="end-round-section glass" id="end-round-section" style="display:none">
    <h3>ğŸ End Round â€” Select Winner</h3>
    <div class="end-round-row">
      <select class="winner-select" id="winner-select"></select>
      <button class="btn btn-award" onclick="endRound()">ğŸ† Award Pot</button>
    </div>
  </div>

  <!-- Leaderboard -->
  <p class="section-label">Leaderboard</p>
  <div class="leaderboard glass">
    <div class="leaderboard-header">
      <div class="leaderboard-title">ğŸ† Rankings</div>
      <button class="collapse-btn" id="collapse-btn" onclick="toggleLeaderboard()">â–¾ Hide</button>
    </div>
    <div class="leaderboard-body" id="leaderboard-body">
      <div class="empty-state">No players yet</div>
    </div>
  </div>

</div><!-- /container -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
/* â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let players     = [];
let pot         = 0;
let highestBet  = 0;
let roundNumber = 0;
let nextId      = 1;
let gameStarted = false;
let lbOpen      = true;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CORE GAME LOGIC (logic preserved exactly from original)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/** addPlayer â€” validate and push new player into state */
function addPlayer() {
  const nameEl  = document.getElementById('player-name-input');
  const chipsEl = document.getElementById('player-chips-input');
  const name  = nameEl.value.trim();
  const chips = parseInt(chipsEl.value) || 1000;

  if (!name) { showToast('âš ï¸ Please enter a player name.', 'error'); return; }
  if (players.length >= 6) { showToast('ğŸš« Maximum 6 players allowed.', 'error'); return; }
  if (players.some(p => p.name.toLowerCase() === name.toLowerCase())) {
    showToast('âš ï¸ Name already exists.', 'error'); return;
  }

  players.push({ id: nextId++, name, chips, currentBet: 0, score: 0, folded: false });
  nameEl.value = ''; chipsEl.value = '1000';
  renderPlayers(); updateLeaderboard();
  showToast(`âœ… ${name} joined the table!`, 'info');
}

/** removePlayer â€” filter player out of state */
function removePlayer(id) {
  players = players.filter(p => p.id !== id);
  renderPlayers(); updateLeaderboard(); updateEndRoundSection();
}

/** startRound â€” reset bets, re-activate folds, bump round counter */
function startRound() {
  if (players.length < 2) { showToast('âš ï¸ Need at least 2 players.', 'error'); return; }
  roundNumber++; pot = 0; highestBet = 0; gameStarted = true;
  players.forEach(p => { p.currentBet = 0; p.folded = false; });
  renderPlayers(); updateLeaderboard(); updateHeader(); updateEndRoundSection();
  showToast(`ğŸ° Round ${roundNumber} started!`, 'info');
}

/** callPlayer â€” match highest bet; handle all-in edge case */
function callPlayer(id) {
  const player = players.find(p => p.id === id);
  if (!player || player.folded) return;

  const callAmount = highestBet - player.currentBet;
  if (callAmount <= 0) { showToast(`${player.name} is already at the highest bet.`, 'error'); return; }

  if (player.chips < callAmount) {
    const allIn = player.chips;
    pot += allIn; player.currentBet += allIn; player.chips = 0;
    showToast(`ğŸ’¥ ${player.name} goes ALL-IN! (${allIn} chips)`, 'info');
  } else {
    player.chips -= callAmount; player.currentBet += callAmount; pot += callAmount;
    showToast(`ğŸ“ ${player.name} calls ${callAmount}`, 'info');
  }

  animatePot(); pulseCard(id);
  renderPlayers(); updateLeaderboard(); updateHeader(); updateEndRoundSection();
}

/** raisePlayer â€” raise above highest bet; update highestBet */
function raisePlayer(id) {
  const player = players.find(p => p.id === id);
  if (!player || player.folded) return;

  const input       = document.getElementById(`raise-input-${id}`);
  const raiseAmount = parseInt(input.value);
  if (!raiseAmount || raiseAmount <= 0) { showToast('Enter a valid raise amount.', 'error'); return; }

  const newBet         = highestBet + raiseAmount;
  const additionalChips = newBet - player.currentBet;

  if (player.chips < additionalChips) {
    showToast(`${player.name} doesn't have enough chips.`, 'error'); return;
  }

  player.chips -= additionalChips; pot += additionalChips;
  player.currentBet = newBet; highestBet = newBet;
  input.value = '';
  showToast(`ğŸ“ˆ ${player.name} raises to ${newBet}!`, 'info');

  animatePot(); pulseCard(id);
  renderPlayers(); updateLeaderboard(); updateHeader(); updateEndRoundSection();
}

/** foldPlayer â€” mark player as folded for this round */
function foldPlayer(id) {
  const player = players.find(p => p.id === id);
  if (!player || player.folded) return;
  player.folded = true;
  showToast(`ğŸ³ï¸ ${player.name} folds.`, 'info');
  renderPlayers(); updateLeaderboard(); updateEndRoundSection();
}

/** endRound â€” award pot to winner, add to score, reset pot */
function endRound() {
  const select   = document.getElementById('winner-select');
  const winnerId = parseInt(select.value);
  const winner   = players.find(p => p.id === winnerId);
  if (!winner) { showToast('Select a valid winner.', 'error'); return; }
  if (pot === 0)  { showToast('No chips in the pot.', 'error'); return; }

  winner.chips += pot; winner.score += pot;
  showToast(`ğŸ† ${winner.name} wins ${pot} chips!`, 'win');
  flashWinner(winner.id);

  pot = 0; highestBet = 0; gameStarted = false;
  updateHeader(); renderPlayers(); updateLeaderboard(); updateEndRoundSection();
}

/** resetGame â€” full state wipe after confirmation */
function resetGame() {
  if (!confirm('Reset entire game? All progress will be lost.')) return;
  players = []; pot = 0; highestBet = 0; roundNumber = 0; gameStarted = false; nextId = 1;
  renderPlayers(); updateLeaderboard(); updateHeader(); updateEndRoundSection();
  showToast('ğŸ”„ Game has been reset.', 'info');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDERING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/** renderPlayers â€” build all player card HTML and inject into grid */
function renderPlayers() {
  const grid = document.getElementById('players-grid');
  if (players.length === 0) {
    grid.innerHTML = `<div class="empty-state" style="grid-column:1/-1">
      <span class="empty-icon">â™ â™¥â™¦â™£</span>Add players above to begin</div>`;
    return;
  }
  const maxBet = Math.max(...players.map(p => p.currentBet));

  grid.innerHTML = players.map(p => {
    const isHighest = gameStarted && p.currentBet === maxBet && maxBet > 0 && !p.folded;
    const dis = p.folded || !gameStarted;
    return `
    <div class="player-card ${p.folded ? 'folded' : ''} ${isHighest ? 'highest-bettor' : ''}" id="card-${p.id}">
      <button class="remove-btn" onclick="removePlayer(${p.id})" title="Remove player">âœ•</button>
      <div class="player-name">${escHtml(p.name)}${isHighest ? ' â­' : ''}</div>
      <span class="player-status ${p.folded ? 'status-folded' : 'status-active'}">${p.folded ? 'Folded' : 'Active'}</span>
      <div class="player-stats">
        <div class="stat">
          <span class="stat-label">Chips</span>
          <span class="stat-value chips-value">${p.chips}</span>
        </div>
        <div class="stat">
          <span class="stat-label">Bet</span>
          <span class="stat-value bet-value">${p.currentBet}</span>
        </div>
        <div class="stat">
          <span class="stat-label">Score</span>
          <span class="stat-value score-value">${p.score}</span>
        </div>
      </div>
      <div class="player-actions">
        <div class="actions-row1">
          <button class="btn btn-call" onclick="callPlayer(${p.id})" ${dis ? 'disabled' : ''}>ğŸ“ Call</button>
          <button class="btn btn-fold" onclick="foldPlayer(${p.id})" ${dis ? 'disabled' : ''}>ğŸ³ï¸ Fold</button>
        </div>
        <div class="actions-row2">
          <input class="raise-input" id="raise-input-${p.id}" type="number" min="1" placeholder="Raise amountâ€¦" ${dis ? 'disabled' : ''}>
          <button class="btn btn-raise" onclick="raisePlayer(${p.id})" ${dis ? 'disabled' : ''}>ğŸ“ˆ Raise</button>
        </div>
      </div>
    </div>`;
  }).join('');
}

/** updateLeaderboard â€” sort players and rebuild rankings table */
function updateLeaderboard() {
  const body = document.getElementById('leaderboard-body');
  if (players.length === 0) {
    body.innerHTML = '<div class="empty-state">No players yet</div>';
    if (lbOpen) body.style.maxHeight = '200px';
    return;
  }
  const sorted = [...players].sort((a,b) => b.score !== a.score ? b.score - a.score : b.chips - a.chips);
  body.innerHTML = `
    <table>
      <thead><tr>
        <th>Rank</th><th>Player</th><th>Chips</th><th>Score</th><th>Status</th>
      </tr></thead>
      <tbody>
        ${sorted.map((p,i) => {
          const r = i + 1;
          const bc = r <= 3 ? `rank-${r}` : 'rank-other';
          return `<tr>
            <td><span class="rank-badge ${bc}">${r}</span></td>
            <td class="lb-name">${escHtml(p.name)}</td>
            <td class="lb-chips">${p.chips}</td>
            <td class="lb-score">${p.score}</td>
            <td>
              <span class="player-status ${p.folded ? 'status-folded' : 'status-active'}" style="font-size:0.62rem;margin:0">
                ${p.folded ? 'Folded' : 'Active'}
              </span>
            </td>
          </tr>`;
        }).join('')}
      </tbody>
    </table>`;

  if (lbOpen) {
    setTimeout(() => { body.style.maxHeight = body.scrollHeight + 'px'; }, 10);
  }
}

/** updateHeader â€” sync pot, round, highestBet display values */
function updateHeader() {
  document.getElementById('pot-amount').textContent = pot;
  document.getElementById('round-number').textContent = roundNumber;
  document.getElementById('highest-bet').textContent = highestBet;
}

/** updateEndRoundSection â€” show/hide winner picker based on game state */
function updateEndRoundSection() {
  const section = document.getElementById('end-round-section');
  const select  = document.getElementById('winner-select');
  if (!gameStarted || players.length === 0 || pot === 0) { section.style.display = 'none'; return; }
  section.style.display = 'block';
  const active = players.filter(p => !p.folded);
  select.innerHTML = active.map(p =>
    `<option value="${p.id}">${escHtml(p.name)} (${p.chips} chips)</option>`
  ).join('');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UI HELPERS & MICRO-ANIMATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/** animatePot â€” bump animation on pot element */
function animatePot() {
  const el = document.getElementById('pot-amount');
  el.textContent = pot;
  el.classList.remove('bump');
  void el.offsetWidth;
  el.classList.add('bump');
}

/** pulseCard â€” temporary glow pulse on a player card */
function pulseCard(id) {
  const card = document.getElementById(`card-${id}`);
  if (!card) return;
  card.classList.remove('action-pulse');
  void card.offsetWidth;
  card.classList.add('action-pulse');
}

/** flashWinner â€” sustained gold glow on winner card */
function flashWinner(id) {
  setTimeout(() => {
    const card = document.getElementById(`card-${id}`);
    if (!card) return;
    card.classList.add('winner-glow');
    setTimeout(() => card.classList.remove('winner-glow'), 3500);
  }, 60);
}

/** toggleLeaderboard â€” collapse/expand rankings on mobile */
function toggleLeaderboard() {
  lbOpen = !lbOpen;
  const body = document.getElementById('leaderboard-body');
  const btn  = document.getElementById('collapse-btn');
  if (lbOpen) {
    body.classList.remove('collapsed');
    body.style.maxHeight = body.scrollHeight + 'px';
    btn.textContent = 'â–¾ Hide';
  } else {
    body.style.maxHeight = body.scrollHeight + 'px';
    void body.offsetWidth;
    body.classList.add('collapsed');
    btn.textContent = 'â–¸ Show';
  }
}

/* â”€â”€ Ripple effect on all .btn clicks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('click', function(e) {
  const btn = e.target.closest('.btn');
  if (!btn || btn.disabled) return;

  const rect = btn.getBoundingClientRect();
  const size = Math.max(rect.width, rect.height) * 2;
  const x = e.clientX - rect.left - size / 2;
  const y = e.clientY - rect.top  - size / 2;

  const ring = document.createElement('span');
  ring.className = 'ripple-ring';
  ring.style.cssText = `width:${size}px;height:${size}px;left:${x}px;top:${y}px;`;
  btn.appendChild(ring);
  setTimeout(() => ring.remove(), 600);
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST NOTIFICATION SYSTEM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showToast(msg, type = 'info') {
  const icons = { win:'ğŸ†', info:'â„¹ï¸', error:'âš ï¸' };
  const container = document.getElementById('toast-container');
  const toast = document.createElement('div');
  toast.className = `toast toast-${type}`;
  toast.innerHTML = `<span class="toast-icon">${icons[type] || 'â„¹ï¸'}</span><span>${msg}</span>`;
  container.appendChild(toast);
  requestAnimationFrame(() => requestAnimationFrame(() => toast.classList.add('show')));
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => toast.remove(), 420);
  }, 2800);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HAND RANKINGS PANEL DATA & LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* â”€â”€ Hand data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const HANDS = [
  {
    rank:1, name:'Royal Flush', odds:'1 in 649,740',
    desc:'The best hand in poker â€” A, K, Q, J, 10 all of the same suit. Unbeatable.',
    cards:[{r:'A',s:'â™¦',col:'red'},{r:'K',s:'â™¦',col:'red'},{r:'Q',s:'â™¦',col:'red'},{r:'J',s:'â™¦',col:'red'},{r:'10',s:'â™¦',col:'red'}]
  },
  {
    rank:2, name:'Straight Flush', odds:'1 in 72,193',
    desc:'Five consecutive cards all of the same suit. Loses only to a Royal Flush.',
    cards:[{r:'J',s:'â™ ',col:'black'},{r:'10',s:'â™ ',col:'black'},{r:'9',s:'â™ ',col:'black'},{r:'8',s:'â™ ',col:'black'},{r:'7',s:'â™ ',col:'black'}]
  },
  {
    rank:3, name:'Four of a Kind', odds:'1 in 4,165',
    desc:'Four cards of the same rank. The fifth card (kicker) is irrelevant.',
    cards:[{r:'9',s:'â™¥',col:'red'},{r:'9',s:'â™£',col:'black'},{r:'9',s:'â™¦',col:'red'},{r:'9',s:'â™ ',col:'black'},{r:'K',s:'â™¥',col:'red',dim:true}]
  },
  {
    rank:4, name:'Full House', odds:'1 in 694',
    desc:'Three of a kind combined with a pair. Higher three-of-a-kind wins ties.',
    cards:[{r:'A',s:'â™¥',col:'red'},{r:'A',s:'â™£',col:'black'},{r:'A',s:'â™¦',col:'red'},{r:'3',s:'â™ ',col:'black'},{r:'3',s:'â™¥',col:'red'}]
  },
  {
    rank:5, name:'Flush', odds:'1 in 509',
    desc:'Any five cards of the same suit, not in sequence. Highest card wins ties.',
    cards:[{r:'K',s:'â™£',col:'black'},{r:'10',s:'â™£',col:'black'},{r:'8',s:'â™£',col:'black'},{r:'7',s:'â™£',col:'black'},{r:'5',s:'â™£',col:'black'}]
  },
  {
    rank:6, name:'Straight', odds:'1 in 255',
    desc:'Five consecutive cards of mixed suits. Ace can be high (A-K-Q-J-10) or low (A-2-3-4-5).',
    cards:[{r:'10',s:'â™¥',col:'red'},{r:'9',s:'â™£',col:'black'},{r:'8',s:'â™¦',col:'red'},{r:'7',s:'â™ ',col:'black'},{r:'6',s:'â™¥',col:'red'}]
  },
  {
    rank:7, name:'Three of a Kind', odds:'1 in 47',
    desc:'Three cards of the same rank. The two remaining cards (kickers) are unmatched.',
    cards:[{r:'7',s:'â™¥',col:'red'},{r:'7',s:'â™¦',col:'red'},{r:'7',s:'â™£',col:'black'},{r:'Q',s:'â™ ',col:'black',dim:true},{r:'3',s:'â™¥',col:'red',dim:true}]
  },
  {
    rank:8, name:'Two Pair', odds:'1 in 21',
    desc:'Two separate pairs of cards. The fifth card (kicker) breaks ties.',
    cards:[{r:'J',s:'â™¥',col:'red'},{r:'J',s:'â™£',col:'black'},{r:'5',s:'â™¦',col:'red'},{r:'5',s:'â™ ',col:'black'},{r:'7',s:'â™¥',col:'red',dim:true}]
  },
  {
    rank:9, name:'One Pair', odds:'1 in 2.4',
    desc:'Two cards of the same rank. The most commonly made hand at showdown.',
    cards:[{r:'A',s:'â™¥',col:'red'},{r:'A',s:'â™£',col:'black'},{r:'K',s:'â™¦',col:'red',dim:true},{r:'J',s:'â™ ',col:'black',dim:true},{r:'7',s:'â™¥',col:'red',dim:true}]
  },
  {
    rank:10, name:'High Card', odds:'Very common',
    desc:'No matching cards. The player with the single highest card wins.',
    cards:[{r:'K',s:'â™¥',col:'red'},{r:'8',s:'â™£',col:'black',dim:true},{r:'Q',s:'â™¦',col:'red',dim:true},{r:'2',s:'â™ ',col:'black',dim:true},{r:'7',s:'â™¥',col:'red',dim:true}]
  }
];

/** makeCard â€” render a single playing card with top-left + bottom-right corners */
function makeCard(c) {
  const cls = c.dim ? 'pc dim' : `pc ${c.col}`;
  return `<div class="${cls}" title="${c.r}${c.s}">
    <div class="corner-top"><span class="c-rank">${c.r}</span><span class="c-suit">${c.s}</span></div>
    <span class="suit-center">${c.s}</span>
    <div class="corner-bot"><span class="c-rank">${c.r}</span><span class="c-suit">${c.s}</span></div>
  </div>`;
}

/** buildHandList â€” render visual card rows + text into the modal */
function buildHandList() {
  document.getElementById('hand-list').innerHTML = HANDS.map((h, i) => `
    <div class="hand-item" style="animation-delay:${i * 0.05}s">
      <div class="hand-meta">
        <div class="hand-rank-num ${h.rank <= 3 ? 'top' : ''}">${h.rank}</div>
        <div class="hand-text">
          <div class="hand-name">${h.name}</div>
          <div class="hand-desc">${h.desc}</div>
          <span class="hand-odds">ğŸ² ${h.odds}</span>
        </div>
      </div>
      <div class="card-row">${h.cards.map(makeCard).join('')}</div>
    </div>`).join('');
}

/** toggleHandRankings â€” open/close the hand rankings bottom sheet */
function toggleHandRankings() {
  const modal = document.getElementById('hand-modal');
  const isOpen = modal.classList.contains('open');
  // Close rules if open
  document.getElementById('rules-modal').classList.remove('open');
  if (isOpen) {
    modal.classList.remove('open');
    document.body.style.overflow = '';
  } else {
    buildHandList();
    modal.classList.add('open');
    document.body.style.overflow = 'hidden';
  }
}

/** toggleRules â€” open/close the game rules bottom sheet */
function toggleRules() {
  const modal = document.getElementById('rules-modal');
  const isOpen = modal.classList.contains('open');
  // Close hand rankings if open
  document.getElementById('hand-modal').classList.remove('open');
  if (isOpen) {
    modal.classList.remove('open');
    document.body.style.overflow = '';
  } else {
    modal.classList.add('open');
    document.body.style.overflow = 'hidden';
  }
}

/** closeModalIfBg â€” close a specific modal when clicking overlay background */
function closeModalIfBg(e, id) {
  if (e.target === document.getElementById(id)) {
    document.getElementById(id).classList.remove('open');
    document.body.style.overflow = '';
  }
}

/* â”€â”€ Keyboard support â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') {
    ['hand-modal','rules-modal'].forEach(id => {
      const m = document.getElementById(id);
      if (m && m.classList.contains('open')) {
        m.classList.remove('open');
        document.body.style.overflow = '';
      }
    });
  }
});
document.getElementById('player-name-input').addEventListener('keydown', e => {
  if (e.key === 'Enter') addPlayer();
});

/* â”€â”€ Utility: escape HTML â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function escHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

/* â”€â”€ Boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
renderPlayers(); updateLeaderboard(); updateHeader();
</script>
</body>
</html>
